<%- include ('../../partials/header.ejs') %> 

<%- include ('../../partials/navbar.ejs') %> 

<div class="container container-top">

    <div class="card">
        <div class="card-header">
            <h5>Cadastro de artigos</h5>
        </div>
        <div class="card-body">
            <form action="/articles/update" method="post">
                <input type="hidden" name="article_id" id="article_id" value="<%= article.id %>" />
                <div class="form-group">
                    <label for="titulo">Título:</label>
                    <input id="title" class="form-control" type="text" name="title" placeholder="Título do artigo" value="<%= article.title %> ">
                </div>
                <div class="form-group">
                    <label for="body">Conteúdo:</label>
                    <textarea id="body_article" class="form-control" name="body" rows="25">
                        <%= article.body %>
                    </textarea>
                </div>                
                <div class="form-group">
                    <label for="label-category">Categorias</label>
                    <select class="form-control" name="category" id="category">
                        <% categories.forEach(category => { %>

                            <% if ( category.id == article.categoryId) { %>
                                <option value="<%= category.id %>" selected><%= category.title %></option>
                            <% } else { %>
                                <option value="<%= category.id %>"><%= category.title %></option>
                            <% } %>

                        <% }); %>                         
                    </select>
                </div>
        </div>
        <div class="card-footer">
                <button class="btn btn-success btn-sm" type="submit"><i class="fas fa-save"></i> Atualizar</button>
                <a href="/admin/articles" class="btn btn-secondary btn-sm float-right"><i class="fas fa-undo-alt"></i> Retornar</a>
            </form>
        </div>
    </div>

</div>

<%- include ('../../partials/footer.ejs') %> 

<!-- Instalando o editor de texto tinyMCE -->
<script src="/tinymce/tinymce.min.js"></script>

<script>
    tinymce.init({
        language: 'pt_BR',
        selector: "#body_article",
        plugins: [
            'advlist autolink link image lists print preview hr searchreplace wordcount fullscreen insertdatetime media save table paste emoticons'
        ]
    });
</script>